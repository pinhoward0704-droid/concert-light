<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>螢光棒端</title>
    <style>
        body { 
            margin: 0; background-color: #000; 
            transition: background-color 0.3s ease; 
            height: 100vh; display: flex; justify-content: center; align-items: center;
        }
        #msg { color: #555; font-family: sans-serif; }
    </style>
</head>
<body>
    <div id="msg">等待燈光指令...</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
			apiKey: "AIzaSyCRiLrwj7nL2TYLNG3VCOa47S6WauT4L6I",
			authDomain: "litetogether2026.firebaseapp.com",
			databaseURL: "https://litetogether2026-default-rtdb.firebaseio.com",
			projectId: "litetogether2026",
			storageBucket: "litetogether2026.firebasestorage.app",
			messagingSenderId: "188950718851",
			appId: "1:188950718851:web:bf3513f747b65577fd2eb6",
			measurementId: "G-YML678VV0W"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // 監聽顏色變化
        const colorRef = ref(db, 'concert/currentColor');
        onValue(colorRef, (snapshot) => {
            const color = snapshot.val();
            if (color) {
                document.body.style.backgroundColor = color;
                document.getElementById('msg').style.display = 'none';
            }
        });
    </script>
</body>
</html>